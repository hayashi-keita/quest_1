{% extends "layout.html" %}
{% block content %}
  <h2 class="mb-4">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>

  <h4>ğŸ”¢ å­¦å¹´åˆ¥å¹³å‡å€¤ï¼ˆèµ°åŠ›ãƒ»è‚©åŠ›ãƒ»æ‰“åŠ›ãƒ»ç­‹åŠ›ï¼‰</h4>

  <div class="row">
    <div class="col-md-6 mb-4">
      <canvas id="chartRun"></canvas>
    </div>
    <div class="col-md-6 mb-4">
      <canvas id="chartShoulder"></canvas>
    </div>
    <div class="col-md-6 mb-4">
      <canvas id="chartBatting"></canvas>
    </div>
    <div class="col-md-6 mb-4">
      <canvas id="chartStrength"></canvas>
    </div>
  </div>

  <!-- å¹³å‡å€¤ãƒ‡ãƒ¼ã‚¿ã‚’åŸ‹ã‚è¾¼ã¿ -->
  <script id="json-data" type="application/json">
    {{ {
      "grades": grades,
      "avg_run_50m": avg_run_50m,
      "avg_base_run": avg_base_run,
      "avg_long_throw": avg_long_throw,
      "avg_pitch": avg_pitch,
      "avg_hit": avg_hit,
      "avg_swing": avg_swing,
      "avg_bench": avg_bench,
      "avg_squat": avg_squat
    } | tojson | safe }}
  </script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const data = JSON.parse(document.getElementById("json-data").textContent);
      const grades = data.grades;

      // èµ°åŠ›
      new Chart(document.getElementById("chartRun"), {
        type: "bar",
        data: {
          labels: grades.map(g => g + "å¹´"),
          datasets: [
            {
              label: "50mèµ°ï¼ˆç§’ï¼‰",
              data: data.avg_run_50m,
              backgroundColor: "rgba(255, 99, 132, 0.6)"
            },
            {
              label: "ãƒ™ãƒ¼ã‚¹ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ï¼ˆç§’ï¼‰",
              data: data.avg_base_run,
              backgroundColor: "rgba(153, 102, 255, 0.6)"
            }
          ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

      // è‚©åŠ›
      new Chart(document.getElementById("chartShoulder"), {
        type: "bar",
        data: {
          labels: grades.map(g => g + "å¹´"),
          datasets: [
            {
              label: "é æŠ•ï¼ˆmï¼‰",
              data: data.avg_long_throw,
              backgroundColor: "rgba(54, 162, 235, 0.6)"
            },
            {
              label: "çƒé€Ÿï¼ˆkm/hï¼‰",
              data: data.avg_pitch,
              backgroundColor: "rgba(255, 159, 64, 0.6)"
            }
          ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

      // æ‰“åŠ›
      new Chart(document.getElementById("chartBatting"), {
        type: "bar",
        data: {
          labels: grades.map(g => g + "å¹´"),
          datasets: [
            {
              label: "æ‰“çƒé€Ÿåº¦ï¼ˆkm/hï¼‰",
              data: data.avg_hit,
              backgroundColor: "rgba(255, 206, 86, 0.6)"
            },
            {
              label: "ã‚¹ã‚¤ãƒ³ã‚°é€Ÿåº¦ï¼ˆkm/hï¼‰",
              data: data.avg_swing,
              backgroundColor: "rgba(75, 192, 192, 0.6)"
            }
          ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

      // ç­‹åŠ›
      new Chart(document.getElementById("chartStrength"), {
        type: "bar",
        data: {
          labels: grades.map(g => g + "å¹´"),
          datasets: [
            {
              label: "ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ï¼ˆkgï¼‰",
              data: data.avg_bench,
              backgroundColor: "rgba(100, 100, 255, 0.6)"
            },
            {
              label: "ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆï¼ˆkgï¼‰",
              data: data.avg_squat,
              backgroundColor: "rgba(200, 100, 100, 0.6)"
            }
          ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

    });
  </script>
{% endblock %}

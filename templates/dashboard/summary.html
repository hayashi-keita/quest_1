{% extends "layout.html" %}
{% block content %}
<h2 class="mb-4">çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>

<h4>ğŸ”¢ å­¦å¹´åˆ¥å¹³å‡</h4>
<canvas id="avgChart" height="120"></canvas>

<!-- JSONãƒ‡ãƒ¼ã‚¿ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰æ¸¡ã™ -->
<script id="json-data" type="application/json">
{
  "grades": {{ grades | tojson | safe }},
  "avg_run_50m": {{ avg_run_50m | tojson | safe }},
  "avg_base_running": {{ avg_base_running | tojson | safe }},
  "avg_long_throw": {{ avg_long_throw | tojson | safe }},
  "avg_pitch_speed": {{ avg_pitch_speed | tojson | safe }},
  "avg_swing": {{ avg_swing | tojson | safe }},
  "avg_hit_speed": {{ avg_hit_speed | tojson | safe }},
  "avg_bench_press": {{ avg_bench_press | tojson | safe }},
  "avg_squat": {{ avg_squat | tojson | safe }}
}
</script>

<script>
const data = JSON.parse(document.getElementById('json-data').textContent);

const ctx = document.getElementById('avgChart').getContext('2d');
new Chart(ctx, {
  type: 'bar',
  data: {
    labels: data.grades.map(g => g + "å¹´"),
    datasets: [
      {
        label: '50mèµ°ï¼ˆç§’ï¼‰',
        data: data.avg_run_50m,
        backgroundColor: 'rgba(255, 99, 132, 0.6)'
      },
      {
        label: 'ãƒ™ãƒ¼ã‚¹ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ï¼ˆç§’ï¼‰',
        data: data.avg_base_running,
        backgroundColor: 'rgba(54, 162, 235, 0.6)'
      },
      {
        label: 'é æŠ•ï¼ˆmï¼‰',
        data: data.avg_long_throw,
        backgroundColor: 'rgba(255, 206, 86, 0.6)'
      },
      {
        label: 'çƒé€Ÿï¼ˆkm/hï¼‰',
        data: data.avg_pitch_speed,
        backgroundColor: 'rgba(75, 192, 192, 0.6)'
      },
      {
        label: 'ã‚¹ã‚¤ãƒ³ã‚°é€Ÿåº¦ï¼ˆkm/hï¼‰',
        data: data.avg_swing,
        backgroundColor: 'rgba(153, 102, 255, 0.6)'
      },
      {
        label: 'æ‰“çƒé€Ÿåº¦ï¼ˆkm/hï¼‰',
        data: data.avg_hit_speed,
        backgroundColor: 'rgba(255, 159, 64, 0.6)'
      },
      {
        label: 'ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ï¼ˆkgï¼‰',
        data: data.avg_bench_press,
        backgroundColor: 'rgba(100, 100, 255, 0.6)'
      },
      {
        label: 'ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆï¼ˆkgï¼‰',
        data: data.avg_squat,
        backgroundColor: 'rgba(0, 200, 100, 0.6)'
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      title: {
        display: true,
        text: 'å­¦å¹´åˆ¥å¹³å‡ï¼ˆå…¨é …ç›®ï¼‰',
        font: {
          size: 18
        }
      },
      legend: {
        position: 'top'
      }
    },
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
</script>

{% endblock %}
